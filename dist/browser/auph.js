var auph=function(n){"use strict";var t=805306368,r=255,e=1024;var i,u,o=Object.freeze({__proto__:null,init:function(){},shutdown:function(){},load:function(n,t){return 0},loadMemory:function(n,t){return 0},unload:function(n){},voice:function(n,t,r,e,i,u){return 0},stop:function(n){},set:function(n,t,r){},get:function(n,t){return 0},vibrate:function(n){return 1}});function f(n){return n+256&16776960|805306623&n}function a(n,t){n.connect(t)}function c(n,t){n.disconnect(t)}function s(n,t){n.value=t}function v(n){return n.length}function d(n,t){n.length=t}function h(n,t){n.push(t)}function l(){if(i&&"closed"!==i.state)return i}function g(){return i}function b(n){n.resume().then((function(){})).catch((function(n){}))}function p(){return i||((i=function(n){var t=window,r=t.AudioContext||t.webkitAudioContext;try{return new r}catch(n){}}())&&(u=i.createBuffer(1,1,22050),function(n){for(var t=["touchstart","touchend","mousedown","click","keydown"],r=v(t),e=document,i=function(){if(n())for(var u=0;u<r;++u)e.removeEventListener(t[u],i,!0)},u=0;u<r;++u)e.addEventListener(t[u],i,!0)}((function(){return"suspended"!==i.state||(b(i),!1)}))),i)}function w(n){n.close().then((function(){})).catch((function(n){})),i=void 0}var _=function(n,t,r){var i=this;this.g=n,this.p=t,this.h=0,this.s=0,this.G=e,this.P=e,this.R=e,this.bf=0,this.bs=0,this._s=0,this.sn=null,this.dn=null,this._e=function(){y(i)},this.h=805306368|r};function y(n){var t=n.sn;if(t){0!=(2&n.s)&&t.stop(),t.onended=null,c(t);try{t.buffer=u}catch(n){}n.sn=null}!function(n){n.dn&&(c(n.g,n.dn),n.dn=null)}(n),n.bf=0,n.bs=0,n.s=0,n.h=f(n.h)}function R(n){var t=n.sn;t&&!n._s&&(t.onended=n._e,t.loop=0!=(4&n.s),t.start(),n._s=1)}function S(n,t){2&n.s&&n.sn&&s(n.sn.playbackRate,t/e)}var G=[null];function P(n){var t=G[n&r];return t&&t.h===n?t:null}function E(n){for(var t=v(G),r=1;r<t;++r){var e;if(0===(e=G[r]).s)return e.h}return t<64?((e=function(n,t){var r=n.createGain(),e=n.createStereoPanner();return a(e,r),new _(r,e,t)}(n,t)).h=805306368|t,G.push(e),e.h):0}var m=function(n){this.g=n,this.h=0,this.s=3,this.G=e},A=[];function B(n){var t=v(A),r=new m(n.createGain());return r.h=268435456|t,h(A,r),r}function M(n){var t=A[n&r];return t&&t.h===n?t:null}var C=function(n,t,r){this.h=n,this.s=t,this.b=r},O=[null];function U(){for(var n=v(O),t=1;t<n;++t){var r=O[t];if(0===r.s)return r.h}if(n<128){var e=new C(536870912|n,0,null);return h(O,e),e.h}return 0}function L(n){n.h=f(n.h),n.s=0,n.b=null}function T(n){var t=O[n&r];return t&&t.h===n?t:null}function k(n,t,r){n.decodeAudioData(r,(function(n){t.s|=2,t.b=n}),(function(n){L(t)}))}function x(n){if(0!==n){var r=n&t;if(805306368===r)(e=P(n))&&y(e);else if(536870912===r){var e;if(e=T(n))for(var i=1;i<v(G);++i){var u=G[i];u.bf===n&&y(u)}}}}function I(n,t){for(var r=0,e=v(n),i=1;i<e;++i){var u=n[i];u&&(u.s&t)===t&&++r}return r}var N=Object.freeze({__proto__:null,init:function(){var n=p();n&&function(n){var t=B(n).g;a(t,n.destination),a(B(n).g,t),a(B(n).g,t),a(B(n).g,t)}(n)},shutdown:function(){var n=l();n&&(!function(){for(var n=0;n<v(A);++n)c(A[n].g);d(A,0)}(),d(G,1),d(O,1),w(n))},load:function(n,t){var e=U();if(e){var i=g();if(!i)return 0;!function(n,t,r,e){n.s|=1,fetch(new Request(r)).then((function(n){return n.arrayBuffer()})).then((function(r){return k(t,n,r)})).catch((function(t){L(n)}))}(O[e&r],i,n)}return e},loadMemory:function(n,t){var e=U();if(e){var i=g();if(!i)return 0;!function(n,t,r,e){n.s|=1,k(t,n,r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength))}(O[e&r],i,n)}return e},unload:function(n){var t=T(n);t&&(x(n),L(t))},voice:function(n,t,r,i,u,o){if(-7&u)return 0;var f=g();if(!f||"running"!==f.state)return null==f||f.state,0;var v=T(n);if(!v)return 0;if(!(2&v.s))return 0;if(!v.b)return 0;var d,h=(d=M(o||268435457))?d.g:void 0;if(!h)return 0;var l=E(f);if(0===l)return 0;var b=P(l);return b.s=1|u,b.bf=n,b.G=t,b.P=r,b.R=i,s(b.g.gain,t/e),s(b.p.pan,r/e-1),function(n,t,r){var e=t.createBufferSource();e.buffer=r,a(e,n.p),n.sn=e,n._s=0}(b,f,v.b),2&u&&R(b),function(n,t){if(t!==n.dn){var r=n.g;n.dn&&c(r,n.dn),n.dn=t,t&&a(r,t)}}(b,h),S(b,i),l},stop:x,set:function(n,r,i){if(0!==n){if(1===n&&128&r&&2&r){var u=l();u&&(i&&"suspended"===u.state?b(u):i||"running"!==u.state||function(n){n.suspend().then((function(){})).catch((function(n){}))}(u))}var o=n&t;if(805306368===o){if(v=P(n))if(128&r){var f=0!==i;2&r?function(n,t){if(t!==!!(2&n.s)){n.s^=2;var r=t?n.R/e:0;n.sn&&(s(n.sn.playbackRate,r),t&&R(n))}}(v,f):4&r&&function(n,t){t!==(0!=(4&n.s))&&(n.s^=4,n.sn&&(n.sn.loop=t))}(v,f)}else 1===r?v.G!==i&&(v.G=i,s(v.g.gain,i/e)):2===r?v.P!==i&&(v.P=i,s(v.p.pan,i/e-1)):3===r&&v.R!==i&&(v.R=i,S(v,i))}else if(268435456===o){var v;(v=M(n))&&(128&r?2&r&&function(n,t){if(!!(2&n.s)!==t){var r=A[0],e=n===r?g().destination:r.g;t?a(n.g,e):c(n.g,e),n.s^=2}}(v,!!i):1===r&&v.G!==i&&(s(v.g.gain,i/e),v.G=i))}}},get:function(n,i){var u=0;if(1===n){var o=g();return o&&(0===i?u=function(n){var t=0;return"closed"!==n.state&&(t|=1,"running"===n.state&&(t|=2)),t}(o):5===i&&(u=0|o.sampleRate)),u}var f,a=n&t;if(256&i&&!(n&r)){var c=127&i;return 805306368===a?u=I(G,c):268435456===a?u=I(A,c):536870912===a&&(u=I(O,c)),u}return 805306368===a?((f=P(n))&&(0===i?u=f.s:1===i?u=f.G:2===i?u=f.P:3===i?u=f.R:6===i?f.sn&&f.sn.buffer&&(u=f.sn.buffer.duration*e|0):4===i&&f.sn&&f.sn.buffer),u):268435456===a?((f=M(n))&&(0===i?u=f.s:1===i&&(u=f.G)),u):(536870912===a&&(f=T(n))&&(0===i?u=f.s:6===i&&f.b&&(u=f.b.duration*e|0)),u)},vibrate:function(n){try{if(navigator.vibrate)return navigator.vibrate(n)?0:1}catch(n){}return 1}});var j="undefined"!=typeof process?require("bindings")("auph"):"undefined"!=typeof window&&(window.AudioContext||window.webkitAudioContext)?N:o,F=j.init,q=j.shutdown,z=j.set,D=j.get,V=j.load,X=j.loadMemory,H=j.unload,J=j.stop,K=j.vibrate;function Q(n,t){z(n,130,0|!t)}function W(n){return n*e|0}return n.ACTIVE=1,n.BUFFER=536870912,n.BUS=268435456,n.BUS_MASTER=268435456,n.BUS_MUSIC=268435458,n.BUS_SFX=268435457,n.BUS_SPEECH=268435459,n.COUNT=256,n.LOOP=4,n.MIXER=1,n.RUNNING=2,n.SAMPLE_RATE=5,n.STATE=0,n.STREAM=4,n.VOICE=805306368,n.get=D,n.getBufferStateString=function(n){return["free","loading","","loaded"][3&n]+[""," streaming"][n>>>2&1]},n.getCurrentTime=function(n){return D(n,4)/e},n.getDuration=function(n){return D(n,6)/e},n.getGain=function(n){return D(n,1)/e},n.getLoop=function(n){return!!(4&D(n,0))},n.getMixerStateString=function(n){return["closed","paused","","running"][3&n]},n.getPan=function(n){return D(n,2)/e-1},n.getPause=function(n){return!(2&D(n,0))},n.getRate=function(n){return D(n,3)/e},n.init=F,n.isActive=function(n){return!!(1&D(n,0))},n.isBufferLoaded=function(n){return 3==(3&D(n,0))},n.load=V,n.loadMemory=X,n.pause=function(n){void 0===n&&(n=1),Q(n,!0)},n.play=function(n,t,r,e,i,u,o){void 0===t&&(t=1),void 0===r&&(r=0),void 0===e&&(e=1);var f=0;return i&&(f|=4),u||(f|=2),j.voice(n,W(t),W(+r+1),W(e),f,0|o)},n.resume=function(n){void 0===n&&(n=1),Q(n,!1)},n.set=z,n.setGain=function(n,t){z(n,1,W(t))},n.setLoop=function(n,t){z(n,132,0|t)},n.setPan=function(n,t){z(n,2,W(+t+1))},n.setPause=Q,n.setRate=function(n,t){z(n,3,W(t))},n.shutdown=q,n.stop=J,n.unload=H,n.vibrate=K,Object.defineProperty(n,"__esModule",{value:!0}),n}({});//# sourceMappingURL=auph.js.map
