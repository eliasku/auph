var auph=function(n){"use strict";var t=805306368,e=255,r=1024;var u,i,o=Object.freeze({__proto__:null,init:function(){},shutdown:function(){},load:function(n,t){return 0},loadMemory:function(n,t){return 0},unload:function(n){},voice:function(n,t,e,r,u,i){return 0},stop:function(n){},set:function(n,t,e){},get:function(n,t){return 0}});function f(n){return n+256&16776960|805306623&n}function c(n,t){n.connect(t)}function a(n,t){n.disconnect(t)}function s(n,t){n.value=t}function d(n){return n.length}function v(n,t){n.length=t}function h(n,t){n.push(t)}function l(){if(u&&"closed"!==u.state)return u}function g(){return u}function p(n){n.resume().then((function(){})).catch((function(n){}))}function b(){return u||((u=function(n){var t=window,e=t.AudioContext||t.webkitAudioContext;try{return new e}catch(n){}}())&&(i=u.createBuffer(1,1,22050),function(n){for(var t=["touchstart","touchend","mousedown","click","keydown"],e=d(t),r=document,u=function(){if(n())for(var i=0;i<e;++i)r.removeEventListener(t[i],u,!0)},i=0;i<e;++i)r.addEventListener(t[i],u,!0)}((function(){return"suspended"!==u.state||(p(u),!1)}))),u)}function w(n){n.close().then((function(){})).catch((function(n){})),u=void 0}var _=function(n,t,e){var u=this;this.g=n,this.p=t,this.h=0,this.s=0,this.G=r,this.P=r,this.R=r,this.bf=0,this.bs=0,this._s=0,this.sn=null,this.dn=null,this._e=function(){R(u)},this.h=805306368|e};function R(n){var t=n.sn;if(t){0!=(2&n.s)&&t.stop(),t.onended=null,a(t);try{t.buffer=i}catch(n){}n.sn=null}!function(n){n.dn&&(a(n.g,n.dn),n.dn=null)}(n),n.bf=0,n.bs=0,n.s=0,n.h=f(n.h)}function S(n){var t=n.sn;t&&!n._s&&(t.onended=n._e,t.loop=0!=(4&n.s),t.start(),n._s=1)}function y(n,t){2&n.s&&n.sn&&s(n.sn.playbackRate,t/r)}var G=[null];function P(n){var t=G[n&e];return t&&t.h===n?t:null}function E(n){for(var t=d(G),e=1;e<t;++e){var r;if(0===(r=G[e]).s)return r.h}return t<64?((r=function(n,t){var e=n.createGain(),r=n.createStereoPanner();return c(r,e),new _(e,r,t)}(n,t)).h=805306368|t,G.push(r),r.h):0}var m=function(n){this.g=n,this.h=0,this.s=3,this.G=r},A=[];function B(n){var t=d(A),e=new m(n.createGain());return e.h=268435456|t,h(A,e),e}function M(n){var t=A[n&e];return t&&t.h===n?t:null}var C=function(n,t,e){this.h=n,this.s=t,this.b=e},O=[null];function U(){for(var n=d(O),t=1;t<n;++t){var e=O[t];if(0===e.s)return e.h}if(n<128){var r=new C(536870912|n,0,null);return h(O,r),r.h}return 0}function L(n){n.h=f(n.h),n.s=0,n.b=null}function T(n){var t=O[n&e];return t&&t.h===n?t:null}function k(n,t,e){n.decodeAudioData(e,(function(n){t.s|=2,t.b=n}),(function(n){L(t)}))}function x(n){if(0!==n){var e=n&t;if(805306368===e)(r=P(n))&&R(r);else if(536870912===e){var r;if(r=T(n))for(var u=1;u<d(G);++u){var i=G[u];i.bf===n&&R(i)}}}}function I(n,t){for(var e=0,r=d(n),u=1;u<r;++u){var i=n[u];i&&(i.s&t)===t&&++e}return e}var N=Object.freeze({__proto__:null,init:function(){var n=b();n&&function(n){var t=B(n).g;c(t,n.destination),c(B(n).g,t),c(B(n).g,t),c(B(n).g,t)}(n)},shutdown:function(){var n=l();n&&(!function(){for(var n=0;n<d(A);++n)a(A[n].g);v(A,0)}(),v(G,1),v(O,1),w(n))},load:function(n,t){var r=U();if(r){var u=g();if(!u)return 0;!function(n,t,e,r){n.s|=1,fetch(new Request(e)).then((function(n){return n.arrayBuffer()})).then((function(e){return k(t,n,e)})).catch((function(t){L(n)}))}(O[r&e],u,n)}return r},loadMemory:function(n,t){var r=U();if(r){var u=g();if(!u)return 0;!function(n,t,e,r){n.s|=1,k(t,n,e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}(O[r&e],u,n)}return r},unload:function(n){var t=T(n);t&&(x(n),L(t))},voice:function(n,t,e,u,i,o){if(-7&i)return 0;var f=g();if(!f||"running"!==f.state)return null==f||f.state,0;var d=T(n);if(!d)return 0;if(!(2&d.s))return 0;if(!d.b)return 0;var v,h=(v=M(o||268435457))?v.g:void 0;if(!h)return 0;var l=E(f);if(0===l)return 0;var p=P(l);return p.s=1|i,p.bf=n,p.G=t,p.P=e,p.R=u,s(p.g.gain,t/r),s(p.p.pan,e/r-1),function(n,t,e){var r=t.createBufferSource();r.buffer=e,c(r,n.p),n.sn=r,n._s=0}(p,f,d.b),2&i&&S(p),function(n,t){if(t!==n.dn){var e=n.g;n.dn&&a(e,n.dn),n.dn=t,t&&c(e,t)}}(p,h),y(p,u),l},stop:x,set:function(n,e,u){if(0!==n){if(1===n&&128&e&&2&e){var i=l();i&&(u&&"suspended"===i.state?p(i):u||"running"!==i.state||function(n){n.suspend().then((function(){})).catch((function(n){}))}(i))}var o=n&t;if(805306368===o){if(d=P(n))if(128&e){var f=0!==u;2&e?function(n,t){if(t!==!!(2&n.s)){n.s^=2;var e=t?n.R/r:0;n.sn&&(s(n.sn.playbackRate,e),t&&S(n))}}(d,f):4&e&&function(n,t){t!==(0!=(4&n.s))&&(n.s^=4,n.sn&&(n.sn.loop=t))}(d,f)}else 1===e?d.G!==u&&(d.G=u,s(d.g.gain,u/r)):2===e?d.P!==u&&(d.P=u,s(d.p.pan,u/r-1)):3===e&&d.R!==u&&(d.R=u,y(d,u))}else if(268435456===o){var d;(d=M(n))&&(128&e?2&e&&function(n,t){if(!!(2&n.s)!==t){var e=A[0],r=n===e?g().destination:e.g;t?c(n.g,r):a(n.g,r),n.s^=2}}(d,!!u):1===e&&d.G!==u&&(s(d.g.gain,u/r),d.G=u))}}},get:function(n,u){var i=0;if(1===n){var o=g();return o&&(0===u?i=function(n){var t=0;return"closed"!==n.state&&(t|=1,"running"===n.state&&(t|=2)),t}(o):5===u&&(i=0|o.sampleRate)),i}var f,c=n&t;if(256&u&&!(n&e)){var a=127&u;return 805306368===c?i=I(G,a):268435456===c?i=I(A,a):536870912===c&&(i=I(O,a)),i}return 805306368===c?((f=P(n))&&(0===u?i=f.s:1===u?i=f.G:2===u?i=f.P:3===u?i=f.R:6===u?f.sn&&f.sn.buffer&&(i=f.sn.buffer.duration*r|0):4===u&&f.sn&&f.sn.buffer),i):268435456===c?((f=M(n))&&(0===u?i=f.s:1===u&&(i=f.G)),i):(536870912===c&&(f=T(n))&&(0===u?i=f.s:6===u&&f.b&&(i=f.b.duration*r|0)),i)}});var j="undefined"!=typeof process?require("bindings")("auph"):"undefined"!=typeof window&&(window.AudioContext||window.webkitAudioContext)?N:o,F=j.init,q=j.shutdown,z=j.set,D=j.get,V=j.load,X=j.loadMemory,H=j.unload,J=j.stop;function K(n,t){z(n,130,0|!t)}function Q(n){return n*r|0}return n.ACTIVE=1,n.BUFFER=536870912,n.BUS=268435456,n.BUS_MASTER=268435456,n.BUS_MUSIC=268435458,n.BUS_SFX=268435457,n.BUS_SPEECH=268435459,n.COUNT=256,n.LOOP=4,n.MIXER=1,n.RUNNING=2,n.SAMPLE_RATE=5,n.STATE=0,n.STREAM=4,n.VOICE=805306368,n.get=D,n.getBufferStateString=function(n){return["free","loading","","loaded"][3&n]+[""," streaming"][n>>>2&1]},n.getCurrentTime=function(n){return D(n,4)/r},n.getDuration=function(n){return D(n,6)/r},n.getGain=function(n){return D(n,1)/r},n.getLoop=function(n){return!!(4&D(n,0))},n.getMixerStateString=function(n){return["closed","paused","","running"][3&n]},n.getPan=function(n){return D(n,2)/r-1},n.getPause=function(n){return!(2&D(n,0))},n.getRate=function(n){return D(n,3)/r},n.init=F,n.isActive=function(n){return!!(1&D(n,0))},n.isBufferLoaded=function(n){return 3==(3&D(n,0))},n.load=V,n.loadMemory=X,n.pause=function(n){void 0===n&&(n=1),K(n,!0)},n.play=function(n,t,e,r,u,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=1);var f=0;return u&&(f|=4),i||(f|=2),j.voice(n,Q(t),Q(+e+1),Q(r),f,0|o)},n.resume=function(n){void 0===n&&(n=1),K(n,!1)},n.set=z,n.setGain=function(n,t){z(n,1,Q(t))},n.setLoop=function(n,t){z(n,132,0|t)},n.setPan=function(n,t){z(n,2,Q(+t+1))},n.setPause=K,n.setRate=function(n,t){z(n,3,Q(t))},n.shutdown=q,n.stop=J,n.unload=H,Object.defineProperty(n,"__esModule",{value:!0}),n}({});//# sourceMappingURL=auph.js.map
